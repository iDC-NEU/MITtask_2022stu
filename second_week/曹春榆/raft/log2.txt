Test (2D): snapshots basic ...
测试的命令为： 8252927204649035645
2 没开始选举所以不投票给 0
1 没开始选举所以不投票给 0
0 收到 2 投票时间： 1 是否支持 false ok true
0 获得新结果 false 支持票数： 1 不支持票数： 0
0 收到 1 投票时间： 1 是否支持 false ok true
0 获得新结果 false 支持票数： 1 不支持票数： 1
0 未支持返回 获得选票 1 总票数为 3
0 尝试选举失败 任期 0 isFarBehind true
1 没开始选举所以不投票给 2
2 收到 0 投票时间： 0 是否支持 true ok true
2 获得新结果 true 支持票数： 1 不支持票数： 0
leader 2 在任期 0 尝试选举成功 canElection false
2 收到 1 投票时间： 0 是否支持 false ok true
0 在任期 1 支持 2
1 没开始选举所以不投票给 2
2 收到 0 投票时间： 1 是否支持 true ok true
2 获得新结果 true 支持票数： 1 不支持票数： 0


 2 成为了任期 1 的leader
2 收到 1 投票时间： 1 是否支持 false ok true
leader 2 的log为 [{<nil> -1}]
leader 2 添加了 {8252927204649035645 1}
1 的log： 1 args.Term, rf.currentTerm 1 1 收到log [{8252927204649035645 1}]
1 持久化时log [{<nil> -1} {8252927204649035645 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 2 commitId为: 0 leader commitId 0 添加的log为 [{8252927204649035645 1}] 前一个Term -1 前一个Index 0
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1}]
0 的log： 1 args.Term, rf.currentTerm 1 1 收到log [{8252927204649035645 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1}]
labgob warning: Decoding into a non-default variable/field NeedTerm may not work
leader 2 收到 1 应答成功 0
leader 2 写入成功, commitId为： 1 logs为： 2
leader 2 的log为： [{<nil> -1} {8252927204649035645 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 2 commitId为: 0 leader commitId 0 添加的log为 [{8252927204649035645 1}] 前一个Term -1 前一个Index 0
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1}]
leader 2 收到 0 应答成功 0
follower 1 lastCommit 0 收到leader 2 任期 1 leader提交 1 logs [] 前一个Term 1 前一个Index 1 logs总长 2
follower 0 lastCommit 0 收到leader 2 任期 1 leader提交 1 logs [] 前一个Term 1 前一个Index 1 logs总长 2
follower 0 在任期 1 commitId为 1 的log为： [{<nil> -1} {8252927204649035645 1}]
follower 1 在任期 1 commitId为 1 的log为： [{<nil> -1} {8252927204649035645 1}]
调用了这个方法： 0 1 false
调用了这个方法： 1 1 false
调用了这个方法： 2 1 true
得到了term 1 的leader true
leader 2 添加了 {4976504751380724513 1}
leader 2 添加了 {3359303583515912868 1}
leader 2 添加了 {1245253141108890254 1}
leader 2 添加了 {4005891580327483660 1}
leader 2 添加了 {2904208110365196927 1}
1 的log： 2 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 5 commitId为: 1 leader commitId 1 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}] 前一个Term 1 前一个Index 1
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
leader 2 收到 1 应答成功 1
leader 2 写入成功, commitId为： 2 logs为： 6
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
0 的log： 2 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 5 commitId为: 1 leader commitId 1 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}] 前一个Term 1 前一个Index 1
1 的log： 5 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
leader 2 添加了 {7699294254315669282 1}
0 的log： 5 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 6 commitId为: 1 leader commitId 1 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}] 前一个Term 1 前一个Index 1
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
leader 2 收到 0 应答成功 1
leader 2 写入成功, commitId为： 3 logs为： 8
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
0 的log： 2 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
出现了顺序问题
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 6 commitId为: 1 leader commitId 1 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}] 前一个Term 1 前一个Index 1
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4005891580327483660 1} {2904208110365196927 1}]
leader 2 添加了 {2794130467940769526 1}
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 6 commitId为: 1 leader commitId 1 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}] 前一个Term 1 前一个Index 1
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
0 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
leader 2 添加了 {4662124376719104569 1}
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1}]
0 的log： 8 args.Term, rf.currentTerm 1 1 收到log [{2904208110365196927 1} {7699294254315669282 1}]
出现了顺序问题
follower 0 写入成功,  leader id 2 ， logs长度为： 8 commitId为: 1 leader commitId 3 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}] 前一个Term 1 前一个Index 1
测试的命令为： 2831284731114089211
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
follower 0 lastCommit 1 收到leader 2 任期 1 leader提交 3 logs [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}] 前一个Term 1 前一个Index 1 logs总长 8
leader 2 收到 0 应答成功 2
leader 2 添加了 {2831284731114089211 1}
0 的log： 8 args.Term, rf.currentTerm 1 1 收到log [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1}]
follower 0 在任期 1 commitId为 3 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
leader 2 收到 1 应答成功 2
leader 2 写入成功, commitId为： 5 logs为： 11
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 收到 0 应答成功 2
leader 2 收到 0 应答成功 2
leader 2 写入成功, commitId为： 5 logs为： 11
0 的log： 8 args.Term, rf.currentTerm 1 1 收到log [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
1 的log： 6 args.Term, rf.currentTerm 1 1 收到log [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
出现了顺序问题
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 6 commitId为: 1 leader commitId 2 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}] 前一个Term 1 前一个Index 1
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
follower 1 lastCommit 1 收到leader 2 任期 1 leader提交 2 logs [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}] 前一个Term 1 前一个Index 1 logs总长 6
follower 0 写入成功,  leader id 2 ， logs长度为： 9 commitId为: 3 leader commitId 3 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1}] 前一个Term 1 前一个Index 1
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1}]
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 在任期 1 commitId为 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 8 commitId为: 3 leader commitId 3 添加的log为 [{2904208110365196927 1} {7699294254315669282 1}] 前一个Term 1 前一个Index 5
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
leader 2 收到 1 应答成功 4
0 的log： 9 args.Term, rf.currentTerm 1 1 收到log [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 7 commitId为: 2 leader commitId 2 添加的log为 [{4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1}] 前一个Term 1 前一个Index 1
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1}]
leader 2 收到 0 应答成功 2
leader 2 写入成功, commitId为： 7 logs为： 11
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
0 的log： 10 args.Term, rf.currentTerm 1 1 收到log [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1}]
出现了顺序问题
leader 2 收到 0 应答成功 3
leader 2 写入成功, commitId为： 7 logs为： 11
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 10 commitId为: 3 leader commitId 3 添加的log为 [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}] 前一个Term 1 前一个Index 5
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
leader 2 收到 1 应答成功 4
follower 1 写入成功,  leader id 2 ， logs长度为： 7 commitId为: 2 leader commitId 2 添加的log为 [{4005891580327483660 1} {2904208110365196927 1}] 前一个Term 1 前一个Index 4
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 11 commitId为: 3 leader commitId 5 添加的log为 [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 5
出现了顺序问题
0 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 收到 0 应答成功 3
leader 2 写入成功, commitId为： 8 logs为： 11
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}]
follower 0 写入成功,  leader id 2 ， logs长度为： 11 commitId为: 3 leader commitId 5 添加的log为 [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 5
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 0 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 0 lastCommit 3 收到leader 2 任期 1 leader提交 5 logs [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 5 logs总长 11
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
follower 0 在任期 1 commitId为 5 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 10 commitId为: 2 leader commitId 3 添加的log为 [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}] 前一个Term 1 前一个Index 4
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}]
leader 2 收到 1 应答成功 4
follower 1 lastCommit 2 收到leader 2 任期 1 leader提交 3 logs [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1}] 前一个Term 1 前一个Index 4 logs总长 10
follower 1 在任期 1 commitId为 3 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 11 commitId为: 3 leader commitId 3 添加的log为 [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 4
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
出现了顺序问题
1 持久化时log [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 收到 1 应答成功 3
leader 2 收到 0 应答成功 2
follower 1 写入成功,  leader id 2 ， logs长度为： 8 commitId为: 2 leader commitId 3 添加的log为 [{4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1}] 前一个Term 1 前一个Index 4
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 收到 1 应答成功 4
leader 2 写入成功, commitId为： 10 logs为： 11
leader 2 收到 0 应答成功 2
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 写入成功,  leader id 2 ， logs长度为： 11 commitId为: 3 leader commitId 5 添加的log为 [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 5
follower 1 添加完成之后的log： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 写入成功, commitId为： 9 logs为： 11
leader 2 收到 1 应答成功 5
leader 2 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 1 lastCommit 3 收到leader 2 任期 1 leader提交 5 logs [{2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}] 前一个Term 1 前一个Index 5 logs总长 11
follower 1 在任期 1 commitId为 5 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
leader 2 收到 1 应答成功 3
follower 1 lastCommit 5 收到leader 2 任期 1 leader提交 10 logs [] 前一个Term 1 前一个Index 10 logs总长 11
follower 1 在任期 1 commitId为 10 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
follower 0 lastCommit 5 收到leader 2 任期 1 leader提交 10 logs [] 前一个Term 1 前一个Index 10 logs总长 11
follower 0 在任期 1 commitId为 10 的log为： [{<nil> -1} {8252927204649035645 1} {4976504751380724513 1} {3359303583515912868 1} {1245253141108890254 1} {4005891580327483660 1} {2904208110365196927 1} {7699294254315669282 1} {2794130467940769526 1} {4662124376719104569 1} {2831284731114089211 1}]
测试的命令为： 1165953892905075831
leader 2 添加了 {1165953892905075831 1}
leader 2 添加了 {1165953892905075831 1}
leader 2 添加了 {1165953892905075831 1}
leader 2 添加了 {1165953892905075831 1}
leader 2 添加了 {1165953892905075831 1}
index: 5 nd, cmd1, cmd, expectedServers 3 4005891580327483660 1165953892905075831 3
--- FAIL: TestSnapshotBasic2D (11.03s)
    config.go:619: one(1165953892905075831) failed to reach agreement
Test (2D): install snapshots (disconnect) ...
测试的命令为： 6252183224307855175
0 被杀死了 任期 1 true
2 被杀死了 任期 1 true
0 没开始选举所以不投票给 1
1 收到 0 投票时间： 0 是否支持 false ok true
1 获得新结果 false 支持票数： 1 不支持票数： 0
2 没开始选举所以不投票给 1
1 收到 2 投票时间： 0 是否支持 false ok true
1 获得新结果 false 支持票数： 1 不支持票数： 1
1 未支持返回 获得选票 1 总票数为 3
1 尝试选举失败 任期 0 isFarBehind true
2 没开始选举所以不投票给 0
0 收到 1 投票时间： 1 是否支持 true ok true
0 获得新结果 true 支持票数： 1 不支持票数： 0
leader 0 在任期 0 尝试选举成功 canElection false
0 收到 2 投票时间： 1 是否支持 false ok true
2 没开始选举所以不投票给 0
0 收到 2 投票时间： 0 是否支持 false ok true
0 获得新结果 false 支持票数： 1 不支持票数： 0
1 在任期 1 支持 0
0 收到 1 投票时间： 0 是否支持 true ok true
0 获得新结果 true 支持票数： 1 不支持票数： 1


 0 成为了任期 1 的leader
leader 0 的log为 [{<nil> -1}]
leader 0 添加了 {6252183224307855175 1}
2 的log： 1 args.Term, rf.currentTerm 1 1 收到log [{6252183224307855175 1}]
2 持久化时log [{<nil> -1} {6252183224307855175 1}]
1 的log： 1 args.Term, rf.currentTerm 1 1 收到log [{6252183224307855175 1}]
1 持久化时log [{<nil> -1} {6252183224307855175 1}]
follower 1 写入成功,  leader id 0 ， logs长度为： 2 commitId为: 0 leader commitId 0 添加的log为 [{6252183224307855175 1}] 前一个Term -1 前一个Index 0
follower 1 添加完成之后的log： [{<nil> -1} {6252183224307855175 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 2 commitId为: 0 leader commitId 0 添加的log为 [{6252183224307855175 1}] 前一个Term -1 前一个Index 0
leader 0 收到 1 应答成功 1
leader 0 写入成功, commitId为： 1 logs为： 2
leader 0 的log为： [{<nil> -1} {6252183224307855175 1}]
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1}]
leader 0 收到 2 应答成功 1
follower 2 lastCommit 0 收到leader 0 任期 1 leader提交 1 logs [] 前一个Term 1 前一个Index 1 logs总长 2
follower 2 在任期 1 commitId为 1 的log为： [{<nil> -1} {6252183224307855175 1}]
follower 1 lastCommit 0 收到leader 0 任期 1 leader提交 1 logs [] 前一个Term 1 前一个Index 1 logs总长 2
follower 1 在任期 1 commitId为 1 的log为： [{<nil> -1} {6252183224307855175 1}]
1 尝试选举失败 任期 1 isFarBehind false
1 被杀死了 任期 1 true
leader 2 从这里成为了Follower, connectNum 1
调用了这个方法： 0 1 true
得到了term 1 的leader true
调用了这个方法： 1 1 false
调用了这个方法： 2 1 false
测试的命令为： 7783147239260868237
leader 0 添加了 {7783147239260868237 1}
2 的log： 2 args.Term, rf.currentTerm 1 1 收到log [{7783147239260868237 1}]
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 3 commitId为: 1 leader commitId 1 添加的log为 [{7783147239260868237 1}] 前一个Term 1 前一个Index 1
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1}]
leader 0 收到 2 应答成功 0
leader 0 写入成功, commitId为： 2 logs为： 3
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1}]
follower 2 lastCommit 1 收到leader 0 任期 1 leader提交 2 logs [] 前一个Term 1 前一个Index 2 logs总长 3
follower 2 在任期 1 commitId为 2 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1}]
leader 0 添加了 {663155817695254288 1}
leader 0 添加了 {104795711713726411 1}
leader 0 添加了 {5876671623278797703 1}
leader 0 添加了 {5233089878020753865 1}
leader 0 添加了 {5620331739768536470 1}
2 的log： 3 args.Term, rf.currentTerm 1 1 收到log [{663155817695254288 1} {104795711713726411 1}]
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 5 commitId为: 2 leader commitId 2 添加的log为 [{663155817695254288 1} {104795711713726411 1}] 前一个Term 1 前一个Index 2
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1}]
leader 0 收到 2 应答成功 1
leader 0 写入成功, commitId为： 3 logs为： 8
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}]
leader 0 添加了 {8056431934566147640 1}
测试的命令为： 475996931002134567
2 的log： 5 args.Term, rf.currentTerm 1 1 收到log [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}]
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}]
leader 0 添加了 {475996931002134567 1}
2 的log： 5 args.Term, rf.currentTerm 1 1 收到log [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1}]
2 的log： 8 args.Term, rf.currentTerm 1 1 收到log [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
出现了顺序问题
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}]
2 的log： 8 args.Term, rf.currentTerm 1 1 收到log [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 8 commitId为: 2 leader commitId 2 添加的log为 [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1}] 前一个Term 1 前一个Index 2
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
2 的log： 9 args.Term, rf.currentTerm 1 1 收到log [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
2 的log： 5 args.Term, rf.currentTerm 1 1 收到log [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 9 commitId为: 2 leader commitId 3 添加的log为 [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}] 前一个Term 1 前一个Index 4
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
follower 2 lastCommit 2 收到leader 0 任期 1 leader提交 3 logs [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}] 前一个Term 1 前一个Index 4 logs总长 9
follower 2 在任期 1 commitId为 3 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
leader 0 收到 2 应答成功 2
follower 2 写入成功,  leader id 0 ， logs长度为： 8 commitId为: 2 leader commitId 2 添加的log为 [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}] 前一个Term 1 前一个Index 2
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
follower 2 lastCommit 3 收到leader 0 任期 1 leader提交 2 logs [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}] 前一个Term 1 前一个Index 2 logs总长 9
follower 2 在任期 1 commitId为 2 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
leader 0 写入成功, commitId为： 4 logs为： 10
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
leader 0 收到 2 应答成功 1
leader 0 写入成功, commitId为： 8 logs为： 10
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
出现了顺序问题
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 9 commitId为: 2 leader commitId 3 添加的log为 [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}] 前一个Term 1 前一个Index 4
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 10 commitId为: 2 leader commitId 3 添加的log为 [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}] 前一个Term 1 前一个Index 4
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 lastCommit 2 收到leader 0 任期 1 leader提交 3 logs [{5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1}] 前一个Term 1 前一个Index 4 logs总长 10
follower 2 在任期 1 commitId为 3 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
leader 0 收到 2 应答成功 2
leader 0 写入成功, commitId为： 8 logs为： 10
leader 0 收到 2 应答成功 1
leader 0 写入成功, commitId为： 9 logs为： 10
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
出现了顺序问题
2 持久化时log [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
leader 0 收到 2 应答成功 2
leader 0 写入成功, commitId为： 9 logs为： 10
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 写入成功,  leader id 0 ， logs长度为： 10 commitId为: 3 leader commitId 2 添加的log为 [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}] 前一个Term 1 前一个Index 2
follower 2 添加完成之后的log： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 lastCommit 3 收到leader 0 任期 1 leader提交 2 logs [{663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1}] 前一个Term 1 前一个Index 2 logs总长 10
follower 2 在任期 1 commitId为 2 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
leader 0 收到 2 应答成功 3
leader 0 写入成功, commitId为： 9 logs为： 10
leader 0 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
follower 2 lastCommit 2 收到leader 0 任期 1 leader提交 9 logs [] 前一个Term 1 前一个Index 7 logs总长 10
follower 2 在任期 1 commitId为 9 的log为： [{<nil> -1} {6252183224307855175 1} {7783147239260868237 1} {663155817695254288 1} {104795711713726411 1} {5876671623278797703 1} {5233089878020753865 1} {5620331739768536470 1} {8056431934566147640 1} {475996931002134567 1}]
测试的命令为： 7399212335836140806
leader 0 添加了 {7399212335836140806 1}
panic: runtime error: index out of range [-3]

goroutine 1725 [running]:
6.824/raft.(*Raft).AppendLogEntries(0xc00014ea80, 0xc0000976d0, 0xc0000fe620)
	/home/toao/code/go/6.824/src/raft/raft.go:1072 +0x138d
reflect.Value.call({0xc00002c240?, 0xc000466f50?, 0xc0000bbb10?}, {0x61c8c0, 0x4}, {0xc0000bbc68, 0x3, 0xc0000bbb40?})
	/usr/local/go/src/reflect/value.go:556 +0x845
reflect.Value.Call({0xc00002c240?, 0xc000466f50?, 0xc00040f438?}, {0xc0000bbc68, 0x3, 0x3})
	/usr/local/go/src/reflect/value.go:339 +0xbf
6.824/labrpc.(*Service).dispatch(0xc0001661c0, {0x621260, 0x10}, {{0x5de060, 0xc00047b890}, {0x62125b, 0x15}, {0x66a6a0, 0x5d52c0}, {0xc00014b440, ...}, ...})
	/home/toao/code/go/6.824/src/labrpc/labrpc.go:496 +0x38e
6.824/labrpc.(*Server).dispatch(0xc000465920, {{0x5de060, 0xc00047b890}, {0x62125b, 0x15}, {0x66a6a0, 0x5d52c0}, {0xc00014b440, 0xcc, 0x116}, ...})
	/home/toao/code/go/6.824/src/labrpc/labrpc.go:420 +0x1fe
6.824/labrpc.(*Network).processReq.func1()
	/home/toao/code/go/6.824/src/labrpc/labrpc.go:240 +0x58
created by 6.824/labrpc.(*Network).processReq
	/home/toao/code/go/6.824/src/labrpc/labrpc.go:239 +0x1d7
exit status 2
FAIL	6.824/raft	11.969s
